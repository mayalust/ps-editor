<config injector="$scope,$rootScope,$q,$timeout,psCommand"
></config>
<template>
  <div>
    <free-board-editor
        data-setting="setting"
        data-options="options"
        data-cotree="cotree"
        data-on-save="onSave(d)">
    </free-board-editor>
  </div>
</template>
<script type="text/javascript">
  export default function(scope,rootScope,q,timeout,psCommand) {
    let storage = window.localStorage, dt = storage["freeboardView"], obj;
    scope.onSave = function(d){
      storage["freeboardView"] = d;
    }
    scope.cotree = {
      children : [{
        abspath : "",
        name : 'common',
        ext : "",
        children : [{
          abspath : "/free-comp-mm.component",
          ext : "component",
          name : "abc"
        }]
      },{
        name : 'project',
        ext : "",
        abspath : "",
        children : [{
          abspath : "/free-comp-nn.component",
          ext : "component",
          name : "edf"
        }]
      }]
    }
    timeout(()=> {
      if(dt){
        try{
          obj = JSON.parse(dt)
        } catch(e){
          obj = []
        } finally {
          scope.options = [];
          scope.setting = { attributes : {} }
          //scope.options = obj.data || [];
          //scope.setting = { attributes : obj.setting || {} } ;
        }
      }
    }, 1000)
  }
</script>
<style type="less">

</style>